<Window x:Class="quiztime.Views.EditQuizWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Quiz Bewerken"
        Width="1400" Height="900"
        Background="#F8F7FB"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Kleuren -->
        <SolidColorBrush x:Key="Primary" Color="#7C3AED"/> <!-- paars -->
        <SolidColorBrush x:Key="Accent" Color="#EC4899"/> <!-- roze -->
        <SolidColorBrush x:Key="Success" Color="#10B981"/> 
        <SolidColorBrush x:Key="Danger" Color="#EF4444"/>
        <SolidColorBrush x:Key="Surface" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="BorderColor" Color="#E5E7EB"/>
        <SolidColorBrush x:Key="TextMain" Color="#1E293B"/>
        <SolidColorBrush x:Key="TextMuted" Color="#6B7280"/>
        <DropShadowEffect x:Key="SoftShadow" Color="#000000" BlurRadius="12" Opacity="0.12" ShadowDepth="2"/>

        <!-- Basisstijlen -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>

        <Style TargetType="Button">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10 6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <DockPanel>
        <!-- HEADER -->
        <Border DockPanel.Dock="Top" Height="70" Padding="20" Background="{StaticResource Primary}">
            <DockPanel>
                <TextBlock Text="Quiz Bewerken" Foreground="White" FontSize="22" FontWeight="Bold" DockPanel.Dock="Left"/>
                <TextBlock x:Name="QuizTitelLabel" Foreground="#DDD6FE" FontSize="14" Margin="20 0 0 0" DockPanel.Dock="Left"/>
            </DockPanel>
        </Border>

        <!-- FOOTER -->
        <Border DockPanel.Dock="Bottom" Height="70" Padding="0 15" Background="#FFFFFF" BorderBrush="{StaticResource BorderColor}" BorderThickness="1 0 0 0" Effect="{StaticResource SoftShadow}">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button Content="Annuleren" Width="120" Background="#9CA3AF" Click="Cancel_Click" Margin="0 0 15 0"/>
                <Button Content="✓ Opslaan" Width="140" Background="{StaticResource Success}" Click="SaveAndClose_Click"/>
            </StackPanel>
        </Border>

        <!-- MAIN -->
        <Grid Margin="30 20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Vragenlijst -->
            <Border Grid.RowSpan="2" Background="{StaticResource Surface}" CornerRadius="14" Padding="16" Effect="{StaticResource SoftShadow}" Margin="0 0 20 0">
                <StackPanel>
                    <TextBlock Text="Vragen" Foreground="{StaticResource Primary}" FontSize="16" FontWeight="Bold" Margin="0 0 0 10"/>
                    <ListBox x:Name="VragenLijst"
                             DisplayMemberPath="Tekst"
                             SelectionChanged="VragenLijst_SelectionChanged"
                             Background="#F9FAFB"
                             BorderThickness="0"
                             Height="550"
                             Padding="4">
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Margin" Value="2"/>
                                <Setter Property="Padding" Value="8"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <Border Name="Border" CornerRadius="6" Background="Transparent" Padding="8">
                                                <ContentPresenter/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource Primary}"/>
                                                    <Setter Property="TextBlock.Foreground" Value="White"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                    </ListBox>
                    <StackPanel Orientation="Horizontal" Margin="0 10 0 0">
                        <Button Content="+ Nieuwe" Background="{StaticResource Accent}" Click="AddVraag_Click" Margin="0 0 8 0"/>
                        <Button Content="– Verwijder" Background="{StaticResource Danger}" Click="RemoveVraag_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Vraag + afbeelding -->
            <Border Grid.Column="1" Background="{StaticResource Surface}" CornerRadius="14" Padding="20" Effect="{StaticResource SoftShadow}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="220"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Quiznaam" Foreground="{StaticResource TextMuted}" FontWeight="SemiBold" Grid.Row="0"/>
                    <TextBox x:Name="NaamBox" Grid.Row="1" Height="36" Margin="0 10 20 20" TextChanged="NaamBox_TextChanged"/>

                    <StackPanel Grid.Column="0" Grid.Row="2" Margin="0 0 20 0">
                        <TextBlock Text="Vraag Tekst" Foreground="{StaticResource TextMuted}" FontWeight="SemiBold"/>
                        <TextBox x:Name="VraagTekstBox" Height="100" TextWrapping="Wrap" AcceptsReturn="True" TextChanged="VraagTekstBox_TextChanged"/>
                    </StackPanel>

                    <!-- Afbeelding zichtbaar en bewerkbaar -->
                    <StackPanel Grid.Column="1" Grid.RowSpan="3">
                        <TextBlock Text="Afbeelding" Foreground="{StaticResource TextMuted}" FontWeight="SemiBold" Margin="0 0 0 6"/>
                        <Border Background="#F3F4F6" BorderBrush="{StaticResource BorderColor}" BorderThickness="1" CornerRadius="10" Height="180" Width="200" HorizontalAlignment="Center">
                            <Image x:Name="VraagAfbeeldingPreview" Stretch="UniformToFill"/>
                        </Border>
                        <StackPanel Orientation="Horizontal" Margin="0 8 0 0" HorizontalAlignment="Center">
                            <Button Content="📁" Width="44" Height="34" Background="{StaticResource Primary}" Click="SelectFoto_Click" Margin="0 0 6 0"/>
                            <Button Content="✕" Width="44" Height="34" Background="{StaticResource Danger}" Click="RemoveFoto_Click"/>
                        </StackPanel>
                        <TextBlock x:Name="FotoPathLabel" FontSize="10" Foreground="{StaticResource TextMuted}" Text="Geen foto" TextAlignment="Center" Margin="0 8 0 0"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Antwoorden -->
            <Border Grid.Row="1" Grid.Column="1" Background="{StaticResource Surface}" CornerRadius="14" Padding="20" Effect="{StaticResource SoftShadow}" Margin="0 20 0 0">
                <StackPanel>
                    <TextBlock Text="Antwoorden" FontSize="16" FontWeight="Bold" Foreground="{StaticResource Primary}" Margin="0 0 0 15"/>

                    <ListBox x:Name="AntwoordenLijst" Background="Transparent" BorderThickness="0">
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="2"/>
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#F9FAFB" BorderBrush="{StaticResource BorderColor}" BorderThickness="1" CornerRadius="10" Margin="8" Padding="10">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="40"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox Text="{Binding Tekst, UpdateSourceTrigger=PropertyChanged}" Grid.Column="0" Margin="0 0 8 0" Height="36"/>
                                        <CheckBox Grid.Column="1" IsChecked="{Binding IsCorrect}" VerticalAlignment="Center"/>
                                        <Button Content="✕" Grid.Column="2" Height="30" Width="30" Background="{StaticResource Danger}" Click="RemoveAntwoord_Click" Tag="{Binding Id}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <Border BorderBrush="{StaticResource BorderColor}" BorderThickness="1" CornerRadius="10" Background="#F9FAFB" Margin="0 20 0 0" Padding="10">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="NieuwAntwoordBox" Grid.Column="0" Height="32" Margin="0 0 6 0"/>
                            <CheckBox x:Name="NieuwAntwoordCorrectCheckbox" Grid.Column="1" VerticalAlignment="Center" Margin="0 0 6 0"/>
                            <Button Grid.Column="2" Content="Toevoegen" Background="{StaticResource Accent}" Height="32" Click="AddAntwoord_Click"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
